
<html>
    <% include ../componentes/head.page.1.ejs %>
    <body class="drawer drawer--left" onload="Consulta(document.getElementById('consulta'))">
        <% include ../componentes/menu.page.1.ejs %>
      <div class="container" >
        <div class="row" >

        <div class="col-xs-12 col-sm-12 col-md-12">

          <div id="panels"  class="card">
            <div class="card-header" id="cor-tema">Consulta de Emprestimos <button  onclick="cadModal();"  id="save_sub2" type="button" class="btn btn-info bmd-btn-fab float-right" >
                <i class="material-icons">add</i>
              </button></div>
            <div class="card-body" style="overflow:auto;">
              


              <div id="formLivro"   class="" >
              
 
                <div class="row">
                 
                  <button type="button" class="btn bmd-btn-icon" >
                    <i class="material-icons">search</i>
                  </button>  
                 <div class="form-group col-sm-6"   >
            
                
                   <input type="text" id="consulta" name="consulta" class="form-control"  onkeyup="Consulta(this);" value="" placeholder="Digite sua consulta ..." />
                         
                        
 
                 </div>
                 
              
                </div>


                <div id="msg-vazio" > <span ></span></div>
                
                <div class="row">
                    
                

                    <table id="tabelaLivro" class="table">
                        <thead id="head-table" class="table-active">
                          <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Nome</th>
                            <th scope="col">CPF</th>
                            <th scope="col">Usuário</th>
                            <th scope="col">Livro</th>
                            <th scope="col">Emprestimo</th>
                            <th scope="col">Devolução</th>
                            <th scope="col">Status</th>
                            <th scope="col">Editar/Finalizar/Excluir</th>
                          </tr>
                        </thead>
                        <tbody id="tableLivro" >
                          
                          
                        </tbody>
                      </table>

                      
                      
                  </div>

                  <div class="row">


                   <div class="col-sm-12">
                      <nav aria-label="Page navigation example">
                              <ul class="pagination justify-content-center" id="paginacao" >
                                  <li class="page-item">
                                    <span class="page-link">Anterior</span>
                                  </li>
                                  <li class="page-item"><a class="page-link" href="#">1</a></li>
                                  <li class="page-item">
                                    <span class="page-link">
                                      2
                                      <span class="sr-only">(current)</span>
                                    </span>
                                  </li>
                                  <li class="page-item"><a class="page-link" href="#">3</a></li>
                                  <li class="page-item">
                                    <a class="page-link" href="#">Próximo</a>
                                  </li>
                                </ul>
                        </nav>

                   </div>
                      

                  </div>



                
                
           
         </div>
            
        </div>  

          </div>
        </div>  

        </div>
      </div>


      <div class="modal" id="ModalExcluir" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Excluir</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>Deseja excluir o emprestimo?</p>
            </div>
            <div class="modal-footer">
              <input id="idExcluir" type="hidden" value="" />
              <button type="button" class="btn btn-danger" onclick="excluirEmprestimo()">Excluir</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
            </div>
          </div>
        </div>
      </div>


      <div class="modal" id="ModalFinalizar" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Finalizar</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>Deseja finalizar o emprestimo?</p>
            </div>
            <div class="modal-footer">
              <input id="idFinalizar" type="hidden" value="" />
              <button type="button" class="btn btn-danger" onclick="finalizarEmprestimo()">Concluir</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
            </div>
          </div>
        </div>
      </div> 




      <div class="modal fade" id="cadModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <span class="modal-title" id="exampleModalLabel">Cadastro de Emprestimo</span>
                <button type="button" class="close"  data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                  <form id="formEmprestimo"  onsubmit="save()" class=""  >
              
 
                    <div class="row">
                     <div class="form-group col-sm-6" >
                
     
                             <label for="cpf" >CPF</label>
                             <input type="text" name="cpf" class="form-control"  value="" placeholder="" maxlength="20" onkeyup="adicionarCliente(this)" data-mask="000.000.000-00" required/>
                             
                             
     
                     </div>
     
     
                     <div class="form-group col-sm-6">
                
     
                             <label for="Cliente" >Cliente</label>

                             <input type="hidden" name="idCliente" value=""   required/>

                             <input type="text" name="clienteEmp" class="form-control"   value="" maxlength="45"  readonly/>
                            
                     </div>



                      <div class="form-group col-sm-6" >
                 
      
                        <label for="senha" >Identificação</label>
                        <select name="ident" class="form-control" onclick="adicionarTipoCodigoLivro(this,1)"  required>
                             <option> ---- Selecione a Identificação ---- </option>
                             <option value="isbn">ISBN</option>
                             <option value="issn">ISSN</option>
                             <option value="doi">DOI</option>
                        </select>  
      
                      </div>
      
      
                      <div class="form-group col-sm-6">
                 
      
                              <label for="Cliente" >Codigo</label>
 
                              <input type="hidden" name="idLivro" value=""   required/>
                              <input type="text" name="codigoLivro" class="form-control"  value=""  onkeyup="adicionarLivro(this)"  disabled/>
                             
                      </div>



                      <div class="form-group col-sm-6">
                 
      
                        <label for="Livro" >Livro</label>

                        
                        <input type="text" name="livro" class="form-control"  placeholder="" value="" maxlength="45" readonly/>
                       
                     </div>
    
                  
 

                      <div class="form-group col-sm-6">
                 
      
                          <label for="Data" >Data do Emprestimo</label>
                          <input type="date" name="dataEmprestimo" class="form-control"  placeholder="" value="" maxlength="10"  onchange="calculoDevolucao(this,1)"   required/>
                         
                     </div>


                     <div class="form-group col-sm-6">
                 
      
                      <label for="Data" >Data da Devolução</label>
                      <input type="date" name="dataDevolucao" class="form-control"  placeholder="" value=""   maxlength="10" readonly/>
                     
                   </div>

                     
     


                    
   
                </div>
                   
                    
               
             </div>
                <div class="card-footer" id="cor-tema" >
              
                <button     id="save_sub" type="submit" class="btn btn-info bmd-btn-fab float-right"  >
                  <i class="material-icons">save</i>
                </button>
                
                <button     id="save_sub" type="reset" class="btn btn-info bmd-btn-fab float-right" >
                  <i class="material-icons">clear</i>
                </button>

              </div>
              </form>  
              </div>
              
            </div>
          </div>
        </div>


       
        <div class="modal fade" id="editarModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <span class="modal-title" id="exampleModalLabel">Editar Cliente</span>
                <button type="button" class="close"  data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form id="formEmprestimoEditar"  onsubmit="saveEditar()" class=""   >
              
                  <div class="row">
                    <div class="form-group col-sm-6" >
               
                            <input type="hidden" name="idemprestimo" value=""/>

                            <label for="cpf" >CPF</label>
                            <input type="text" name="cpf" class="form-control"  value="" placeholder="" maxlength="20" onkeyup="adicionarClienteEdit(this)" data-mask="000.000.000-00" required/>
                            
                            
    
                    </div>
    
    
                    <div class="form-group col-sm-6">
               
    
                            <label for="Cliente" >Cliente</label>

                            <input type="hidden" name="idCliente" value=""   required/>

                            <input type="text" name="clienteEmp" class="form-control"   value="" maxlength="45"  readonly/>
                           
                    </div>



                     <div class="form-group col-sm-6" >
                
     
                       <label for="senha" >Identificação</label>
                       <select name="ident" class="form-control" onclick="adicionarTipoCodigoLivro(this,0)"  required>
                            
                            <option value="isbn">ISBN</option>
                            <option value="issn">ISSN</option>
                            <option value="doi">DOI</option>
                       </select>  
     
                     </div>
     
     
                     <div class="form-group col-sm-6">
                
     
                             <label for="Cliente" >Codigo</label>

                             <input type="hidden" name="idLivro" value=""   required/>
                             <input type="text" name="codigoLivro" class="form-control"  value=""  onkeyup="adicionarLivroEdit(this)"  disabled/>
                            
                     </div>



                     <div class="form-group col-sm-6">
                
     
                       <label for="Livro" >Livro</label>

                       
                       <input type="text" name="livro" class="form-control"  placeholder="" value="" maxlength="45" readonly/>
                      
                    </div>
   
                 


                     <div class="form-group col-sm-6">
                
     
                         <label for="Data" >Data do Emprestimo</label>
                         <input type="date" name="dataEmprestimo" class="form-control"  placeholder="" value="" maxlength="10"  onchange="calculoDevolucao(this,0)"   required/>
                        
                    </div>


                    <div class="form-group col-sm-6">
                
     
                     <label for="Data" >Data da Devolução</label>
                     <input type="date" name="dataDevolucao" class="form-control"  placeholder="" value=""   maxlength="10" readonly/>
                    
                  </div>

                    
    


                   
  
               </div>
                 
                  
             
              </div>
              <div class="card-footer" id="cor-tema" ><button     id="save_subEdit" type="submit" class="btn btn-info bmd-btn-fab float-right" >
                <i class="material-icons">save</i>
              </button></div>
            </form>  
              </div>
              
            </div>
          </div>
        </div>


      
<script src="../../js/moment.js" type="text/javascript"></script>
<script src="../../js/Emprestimo.js" type="text/javascript"></script>

<script src="../../js/jquery.mask.min.js" type="text/javascript" ></script>

    </body>
</html>